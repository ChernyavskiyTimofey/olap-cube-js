/*!
 * Version: "0.4.1"
 * Copyright Â© 2018 Orlov Leonid. All rights reserved. Contacts: <feonitu@yandex.ru>
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Cube=t():e.Cube=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ENTITY_ID="id"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=function(){function e(t){r(this,e),o(this,t)}return i(e,null,[{key:"create",value:function(t,n,r){if(this!==e&&!e.isPrototypeOf(this))throw Error("this.constructor must be prototype of Member");var o={};return o[u.ENTITY_ID]=t,n.forEach(function(e){e!==u.ENTITY_ID&&(o[e]=r[e])}),new this(o)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var f=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(12),y=r(p),h=n(0),d=n(1),b=(r(d),n(13)),v=r(b),O=n(14),m=n(4),_=r(m),g=n(10),j=r(g),w=n(17),P=r(w),E=n(18),k=r(E),T=n(19),M=r(T),x=n(11),D=r(x),I=n(6),N=n(21),C=r(N),R=n(7),L=r(R),S=function(){function e(t){if(c(this,e),2===arguments.length)return L.default.warnOnce("deprecated: new Cube(facts, schema), use Cube.create(facts, schema) instead"),this.constructor.create.apply(this.constructor,arguments);var n=t.space,r=t.cellTable,o=t.schema;this.space=new _.default(n),this.cellTable=new D.default(r),Object.defineProperty(this,"schema",{value:new O.Schema(o)});var i=this.residuals();i.length>0&&L.default.warn("Fact table has residuals",i)}return l(e,[{key:"getFacts",value:function(){return this.denormalize(this.cellTable)}},{key:"getDimensionMembers",value:function(e){return this.space.getMemberList(e)}},{key:"getFactsBySet",value:function(e){var t=this.projection(e),n=t.cellTable;return this.denormalize(n)}},{key:"getDimensionMembersBySet",value:function(e,t){var n=this.projection(t),r=n.cellTable;return this.getDimensionMembersFromCells(e,r)}},{key:"getCells",value:function(){return this.cellTable}},{key:"getCellsBySet",value:function(e){return this.projection(e)}},{key:"projection",value:function(e){var t=this.cellTable;if(e){(new k.default).applyAdapter(e,this.space);t=new P.default(e).match(t)}return{cellTable:t}}},{key:"getDimensionMembersFromCells",value:function(t,n){var r=e.genericId(t),o=n.map(function(e){return e[r]}),i=function(e){var t={};return e.forEach(function(e){t[e]=e}),Object.keys(t).map(function(e){return t[e]})}(o),u=[];return this.space.getMemberList(t).forEach(function(e){-1!==i.indexOf(e[h.ENTITY_ID])&&u.push(e)}),u}},{key:"denormalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cellTable,t=this.schema.getDimensionsResolutionOrder();return C.default.destroy(e,this.space,t)}},{key:"cartesian",value:function(){var e=this,t=this.schema.getBranches(),n=function(e,t){var n;return(n=[]).concat.apply(n,a(e.map(function(e){return t.map(function(t){return[].concat(e,t)})})))},r=function e(t,r){for(var o=arguments.length,i=Array(o>2?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];return r?e.apply(void 0,[n(t,r)].concat(i)):t},o=t.map(function(t){var n=t.map(function(e){return e.dimension}).reverse();if(n.length>1){var r=[];return function t(n,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=n[o];o+=1,e.getDimensionMembersBySet(u,i).map(function(e){var a=s({},i);a[u]=e,o===n.length?r.push(a):t(n,o,a)})}(n,0),r}return[].concat(e.getDimensionMembers(n[0])).map(function(e){return u({},n[0],e)})}),i=r.apply(null,o),c=i.map(function(e){return e.reduce(function(e,t){return s(e,t)},{})}),f=new M.default;return c.forEach(function(e){f.add(e)}),f}},{key:"residuals",value:function(){var e=this,t=this.cartesian(),n=[];return t.forEach(function(t){e.getFactsBySet(t).length>1&&n.push(t)}),n}},{key:"unfilled",value:function(){var e=this,t=this.cartesian(),n=[];return t.forEach(function(t){0===e.getFactsBySet(t).length&&n.push(t)}),n}}],[{key:"create",value:function(e,t){if(!A.isPrototypeOf(this)&&A!==this)throw new I.CreateInstanceException;var n=new O.Schema(t),r=new j.default(e),o=n.getDimensionsResolutionOrder(),i=C.default.build(r,o);return new this({space:i.space,cellTable:i.cellTable,schema:n})}},{key:"genericId",value:function(e){return e+"_"+h.ENTITY_ID}}]),e}(),A=function(e){function t(){return c(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"addDimensionMember",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw Error("parameter dimension expects as string: "+e);this._validateDimension(e);var o=u({},e,this._createMember(e,n)),i={};Object.keys(r).forEach(function(e){var n=r[e],o=t.getDimensionMembers(e),u=n[h.ENTITY_ID],a=o.find(function(e){return u===e[h.ENTITY_ID]});if(!a)throw new I.CantAddMemberRollupException(e,u);i[e]=a}),this._validateCompletenessRollupCoordinatesData(e,n,r);var a={};this.schema.traceUp(e,function(e){var n=e.dimension;a[n]=t._createMember(n)});var c=s({},o,i,a),f=this.schema.getExternals(),l=f.filter(function(t){var n=t.dimension;return e!==n&&!i[n]}),p=new _.default;l.forEach(function(e){var n=e.dimension;p.setMemberList(n,t.space.getMemberList(n))});var y=function(e){var n=t.schema.getMeasure().dimension,r=t._createMember(n),o=u({},n,r),i=s({},e,o);t._createNormalizeData(i)},d=this.schema.getNames().length-1,b=p.getDimensionList(),v=b.map(function(e){return p.getMemberList(e)});!function e(n,r,o,i){var a=n.length,c=n[o],f=[],l=t.schema.getByDependency(c);r[o].forEach(function(p){var y=s({},i);if(y[c]=p,l){var h=t.getDimensionMembersBySet(l.dimension,u({},c,p));e([l.dimension],[h],0,y)}o+1===a?Object.keys(y).length===d&&f.push(y):e(n,r,o+1,y)}),f.forEach(function(e){y(e)})}(b,v,0,c)}},{key:"_validateDimension",value:function(e){if(e===this.schema.getMeasure().dimension)throw new I.AddDimensionOfCellException(e)}},{key:"_validateCompletenessRollupCoordinatesData",value:function(e,t,n){var r=s(u({},e,t),n),o=this.schema.getPostOrderChildDimensionList(e);if(o.length){var i=o[0];if(r[i])return;throw new I.NotCompletelySpaceException(i)}}},{key:"removeDimensionMember",value:function(e,t){var n=this,r=this.schema.getDependenciesNames(e),o=this.space.getMemberList(e).indexOf(t);if(-1===o)throw new Error("represented member was not found in the "+e+" dimension");this.space.getMemberList(e).splice(o,1),this.cellTable.filter(function(n){return n[S.genericId(e)]==t[h.ENTITY_ID]}).forEach(function(e){var t=n.cellTable.indexOf(e);n.cellTable.splice(t,1),r.forEach(function(t){n._removeSubModel(e,t)})}),this._normalize()}},{key:"denormalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cellTable,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"denormalize",this).call(this,e);return n&&r.forEach(function(t,n){e[n]instanceof y.default&&delete t[h.ENTITY_ID]}),r}},{key:"_removeSubModel",value:function(e,t){var n=this;this.space.getMemberList(t).filter(function(n){return n[h.ENTITY_ID]==e[S.genericId(t)]}).forEach(function(e){var r=n.space.getMemberList(t).indexOf(e);n.space.getMemberList(t).splice(r,1)})}},{key:"_normalize",value:function(){var e=this,t=[];this.schema.getNames().forEach(function(n){if(e.space.getMemberList(n).length){var r=[].concat(e.space.getMemberList(n));r.forEach(function(o,i){var u=S.genericId(n);e.cellTable.find(function(e){return e[u]==o[h.ENTITY_ID]})||(e.space.getMemberList(n).splice(i-(r.length-e.space.getMemberList(n).length),1),t.push(o))})}})}},{key:"fill",value:function(e){var t=this;if(!this.residuals().length){var n=this.schema.getMeasure().dimension,r=this.cartesian(),o=[];r.forEach(function(e){t.getDimensionMembersBySet(n,e).length||o.push(e)}),o.forEach(function(r){var o=t._createMemberDependency(n,e),i=s({},r,o);t._createNormalizeData(i)})}}},{key:"_createNormalizeData",value:function(e){var t={};Object.keys(e).forEach(function(n){t[S.genericId(n)]=e[n][h.ENTITY_ID]});var n=new y.default(t);this.cellTable.push(n)}},{key:"_createMember",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.schema.getDimensionTable(e),o=r.keyProps,i=t.reduceId(this.space.getMemberList(e)),u=v.default.create(i,o,n);return this.space.getMemberList(e).add(u),u}},{key:"_createMemberDependency",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return r[e]=this._createMember(e,n),this.schema.traceUp(e,function(e){var n=e.dimension;r[n]=t._createMember(n)}),r}}],[{key:"reduceId",value:function(e){return e.length?e.reduce(function(e,t){return e[h.ENTITY_ID]>t[h.ENTITY_ID]?e:t},0).id+1:1}}]),t}(S);A.default=A,t.default=A},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),c=n(5),f=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"deleteProps",value:function(e){var t=this;e.forEach(function(e){e!==a.ENTITY_ID&&delete t[e]})}}]),t}(f.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(t){var n=this;r(this,e),t&&this.getDimensionList.call(t).forEach(function(e){var r=t[e];n.setMemberList(e,r)})}return o(e,[{key:"getMemberList",value:function(e){var t=this[e];if(!t)throw Error('dimension "'+e+'" not found');return t}},{key:"setMemberList",value:function(e,t){this[e]=new u.default(t)}},{key:"getDimensionList",value:function(){return Object.keys(this)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),u=n(6),a=n(7),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){var t=void 0===e?"undefined":o(e);return"object"!==t&&"function"!==t&&"undefined"!==t||null===e},s=function e(t){r(this,e);try{for(var n in t){if(!t.hasOwnProperty(n))return;f(t[n])?this[n]=t[n]:c.default.warn('[Fact] value of prop "'+n+'" has an unspecified value: '+t[n])}if(!(i.ENTITY_ID in this))throw new u.NotFoundFactId}catch(e){(0,u.handleError)(e)}};t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});t.NotCompletelySpaceException=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='Not completely defined space for added member, not found member for dimension: "'+e+'"',n}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.AddDimensionOfCellException=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='You can not add a second member to the dimension for the cell: "'+e+'"',n}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.CantAddMemberRollupException=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.message="Can't add member, rollup dimension: "+e+" with id: "+n+" not found",i}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.NotFoundFactId=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.message="Not found fact id",e}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.CreateInstanceException=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.message="this must have prototype of Cube",e}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.handleError=function(e){throw e instanceof Error&&(e.message="[Cube] "+e.message),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=console,o={log:function(e){r.log("[Cube] "+e)},warn:function(e){r.warn("[Cube] "+e)},warnOnce:function(){var e={};return function(t){e[t]||(e[t]=!0,r.warn("[Cube] "+t))}}()};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){var n=t.dimension,o=t.keyProps,i=t.otherProps,u=void 0===i?[]:i;if(r(this,e),!n||!o||!o.length)throw Error("Bad dimension description at schema, params 'dimension' and 'keyProps' is required");this.dimension=n,this.keyProps=o,this.otherProps=u};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&(e=e.map(function(e){return new l.default(e)}),a(n,e)),n}return i(t,e),c(t,[{key:"filter",value:function(){return[].filter.apply(this,arguments)}},{key:"searchValue",value:function(e){return this.filter(function(t){return Object.keys(t).find(function(n){return n!==f.ENTITY_ID&&t[n]===e})})}},{key:"searchData",value:function(e){if(e&&"object"===(void 0===e?"undefined":u(e))){var t=Object.keys(e);return this.filter(function(n){return t.some(function(t){return n.hasOwnProperty(t)&&n[t]!==e[t]})})}}},{key:"add",value:function(e){this.indexOf(-1===e[f.ENTITY_ID])&&this.push(e)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(5),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&u(n,e.map(function(e){return new c.default(e)})),n}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(3),f=function(e){return e&&e.__esModule?e:{default:e}}(c),s=n(0),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&u(n,e.map(function(e){return new f.default(e)})),n}return i(t,e),a(t,[{key:"findById",value:function(e){return this.find(function(t){return t[s.ENTITY_ID]===e})}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e,n){return r(this,t),e.id||(e.id=u()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return i(t,e),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},c=n(1),f=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,null,[{key:"create",value:function(e,n,r){var o={};return n.forEach(function(e){o[e]=r.hasOwnProperty(e)?r[e]:null}),a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e,n,o)}}]),t}(f.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=t.DimensionException=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(15),l=r(s),p=n(16),y=r(p),h=t.DimensionException=function(e){function t(e){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='For the name "'+e+'" the dimension is already set',n}return a(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),d=function e(t){var n=t.dependency,r=void 0===n?[]:n,i=o(t,["dependency"]);return{value:f({},i,{dependencyNames:r.map(function(e){return e.dimension})}),childNodes:r.map(e)}};t.Schema=function(e){function t(e){i(this,t);var n=e.schema?e.schema:e,r=d(n),o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return o.schema=new l.default(n),o._dimensionsResolutionOrder=[],o._dimensionTable={},o.postOrder(function(e){var t=e.dimension;if(o._dimensionTable[t])throw new h(t);var n=e.dimension;o._dimensionTable[n]=e,o._dimensionsResolutionOrder.push(o._dimensionTable[n])}),0===o.getFinal().length&&console.warn("Fact table not has final dimension"),o}return a(t,e),c(t,[{key:"getDimensionTable",value:function(e){return this._dimensionTable[e]}},{key:"getDimensionsResolutionOrder",value:function(){return this._dimensionsResolutionOrder}},{key:"getByDependency",value:function(e){var t=this,n=!1;return this.postOrder(function(r,o){var i=r.dimension;if(e===i){var u=t.getParentOf(o);u&&u!==t._root&&(n=u.value)}}),n}},{key:"getNames",value:function(){return this._dimensionsResolutionOrder.map(function(e){return e.dimension})}},{key:"traceUp",value:function(e,t){var n=this,r=!1,o=[];this.postOrder(function(t,n){var o=t.dimension;e===o&&(r=n)});r&&function e(t){var r=n.getParentOf(t);if(r){if(r===n.getRoot())return;o.push(r),e(r)}}(r),o.forEach(function(e){t(e.value)})}},{key:"getDependenciesNames",value:function(e){var t=[];return this.postOrder(function(n,r){var o=n.dimension;if(e===o){new y.default(r).postOrder(function(n){var r=n.dimension;e!==r&&t.push(r)})}}),t}},{key:"getMeasure",value:function(){return this.getRoot().value}},{key:"getExternals",value:function(){var e=this,t=[];return this.postOrder(function(n,r){e.isExternal(r)&&t.push(n)}),t}},{key:"getInternals",value:function(){}},{key:"getPostOrderChildDimensionList",value:function(e){var t=void 0,n=[];this.postOrder(function(n,r){n.dimension===e&&(t=r)});return t&&function e(t){t&&t.childNodes.length&&t.childNodes.forEach(function(t){n.push(t.value.dimension),e(t)})}(t),n}},{key:"getFinal",value:function(){return this.getRoot().childNodes.map(function(e){return e.value})}},{key:"isRoot",value:function(e){return e===this.getRoot().value}}],[{key:"create",value:function(e){return new t({schema:e})}}]),t}(y.default)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e){var n=e.dependency,u=void 0===n?[]:n,a=r(e,["dependency"]);o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return c.dependency=u&&u.map(function(e){return new t(e)}),c}return u(t,e),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t){var n=t.value,o=t.childNodes,i=void 0===o?[]:o;r(this,e),this.value=n,this.childNodes=i.length?i.map(function(t){return new e(t)}):i},u=function(){function e(t){r(this,e),this._root=new i(t)}return o(e,[{key:"getRoot",value:function(){return this._root}},{key:"createIterator",value:function(e){var t=0;return{next:function(){var n=t>=e.length;return{done:n,value:n?void 0:e[t++]}}}}},{key:"preOrder",value:function(e){!function t(n){e(n.value,n),n.childNodes.length&&n.childNodes.forEach(function(e){t(e)})}(this.getRoot())}},{key:"preOrderQueue",value:function(){var e=[];return function t(n){e.push(n),n.childNodes.length&&n.childNodes.forEach(function(e){t(e)})}(this.getRoot()),e}},{key:"postOrder",value:function(e){!function t(n){n.childNodes.length&&n.childNodes.forEach(function(e){t(e)}),e(n.value,n)}(this.getRoot())}},{key:"inOrder",value:function(e){}},{key:"levelOrder",value:function(e){}},{key:"isInternal",value:function(e){return!!e.childNodes.length}},{key:"isExternal",value:function(e){return!e.childNodes.length}},{key:"isRoot",value:function(e){return this._root===e}},{key:"getParentOf",value:function(e){var t=!1;return this.preOrder(function(n,r){r.childNodes&&r.childNodes.length&&-1!==r.childNodes.indexOf(e)&&(t=r)}),t}},{key:"search",value:function(e){}},{key:"getBranches",value:function(){return this.getRoot().childNodes.map(function(e){return e}).map(function(e){var t=[];return function e(n){t.push(n.value),n.childNodes.length&&n.childNodes.forEach(function(t){e(t)})}(e),t})}},{key:"getLeafs",value:function(){var e=this.preOrderQueue(),t=[];return e.forEach(function(e){e.childNodes.length&&t.push(e)}),t}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},f=n(4),s=r(f),l=n(0),p=n(3),y=(r(p),n(2)),h=r(y),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='data attribute for dimension is "'+e+'"',n}return u(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),b=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),a(t,[{key:"setMemberList",value:function(e,n){if(!n)throw new d;return Array.isArray(n)||(n=[n]),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMemberList",this).call(this,e,n)}},{key:"match",value:function(e){var t=this,n=[].concat(e);return this.getDimensionList().forEach(function(e){var r=h.default.genericId(e),o=t.getMemberList(e),i=[];o.forEach(function(e){var t=e[l.ENTITY_ID],o=n.filter(function(e){return e[r]==t}),u=[i.length,0].concat(o);[].splice.apply(i,u)}),n=i}),n}}]),t}(s.default);t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"applyAdapter",value:function(e,t){return this.removeEmptyFilds(e),Object.keys(e).forEach(function(n){var r=e[n],o=function(e,n){var r=t.getMemberList(e);return r?r.searchValue(n):void 0};"string"==typeof r&&(e[n]=o(n,r)||[]),Array.isArray(r)&&r.length&&"string"==typeof r[0]&&(e[n]=[],r.reduce(function(e,t){var r=o(n,t);return r&&[].splice.apply(e,[e.length,0].concat(r)),e},e[n]))}),e}},{key:"removeEmptyFilds",value:function(e){return Object.keys(e).reduce(function(e,t){return e[t]||delete e[t],e},e),e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},f=n(20),s=function(e){return e&&e.__esModule?e:{default:e}}(f),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&u(n,e.map(function(e){return new s.default(e)})),n}return i(t,e),a(t,[{key:"add",value:function(e){this.push(new s.default(e))}},{key:"forEach",value:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"forEach",this).apply(this,arguments)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function e(t){r(this,e),o(this,t)};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),c=r(a),f=n(11),s=r(f),l=n(9),p=r(l),y=n(1),h=r(y),d=n(0),b=n(22),v=r(b),O=n(2),m=r(O),_=n(10),g=r(_),j=function(){function e(){o(this,e)}return u(e,null,[{key:"build",value:function(t,n){var r=new c.default,o=new s.default(t),i=n.map(function(e){return new v.default(e)});return i.forEach(function(n,u){var a=n.dimension,c=n.keyProps,f=n.otherProps,s=n.dependencyNames,l=u===i.length-1,p=void 0,y=[t,a,c,f,o];if(s.length){var h=[];l?(h=e.mapFilterRoot(s,o,r),p=e.makeMemberListDependency.apply(null,y.concat([r,s,h]))):(h=e.mapFilter(s,o,r.getMemberList(s[0])),p=e.makeMemberListDependency.apply(null,y.concat([r,s,h])))}else p=e.makeMemberList.apply(null,y);r.setMemberList(a,p)}),{space:r,cellTable:o}}},{key:"destroy",value:function(e,t,n){var r=n.map(function(e){return new v.default(e)}),o=new g.default;return e.forEach(function(e){o.push(i({},e))}),o.forEach(function(e){var n=function(n){var r=m.default.genericId(n.dimension),o=e[r],u=t.getMemberList(n.dimension).find(function(e){return e[d.ENTITY_ID]===o}),a=i({},u);delete a[d.ENTITY_ID],delete e[r],i(e,a)};r.forEach(function(e){n(e)})}),o}},{key:"mapFilter",value:function(e,t,n){var r=m.default.genericId(e);return n.map(function(e){return t.filter(function(t){return t[r]==e[d.ENTITY_ID]})})}},{key:"mapFilterRoot",value:function(t,n,r){var o=[n];return t.forEach(function(t){var n=[];o.forEach(function(o){e.mapFilter(t,o,r.getMemberList(t)).forEach(function(e){n.push(e)})}),o=n}),o}},{key:"makeMemberList",value:function(t,n,r,o,i){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a={},c=new p.default,f=[].concat(r,o);return t.forEach(function(t){var o=e.createKeyFromProps(r,t);if(!(o in a)){var s=a[o]=++u,l=h.default.create(s,f,t);c.push(l)}var p=t[d.ENTITY_ID],y=i.findById(p);y.deleteProps(f);var b=a[o];y[m.default.genericId(n)]=b}),c}},{key:"makeMemberListDependency",value:function(t,n,r,o,i,u,a,c){var f=new p.default,s=0;return c.forEach(function(t){if(t.length){var u=e.makeMemberList(t,n,r,o,i,s);s+=u.length,u.forEach(function(e){e[d.ENTITY_ID]=f.length+1,f.add(e)})}}),f}},{key:"createKeyFromProps",value:function(e,t){return e.map(function(e){return t[e]}).join(",")}}]),e}();t.default=j},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e){var n=e.dependencyNames,u=void 0===n?[]:n,a=r(e,["dependencyNames"]);o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return c.dependencyNames=u,c}return u(t,e),t}(c.default);t.default=f}]).default});