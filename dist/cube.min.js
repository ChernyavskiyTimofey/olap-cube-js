/*!
 * Version: "0.4.2"
 * Copyright Â© 2018 Orlov Leonid. All rights reserved. Contacts: <feonitu@yandex.ru>
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Cube=t():e.Cube=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ENTITY_ID="id"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),a=function(){function e(t){n(this,e),o(this,t)}return i(e,null,[{key:"create",value:function(t,r,n){if(this!==e&&!e.isPrototypeOf(this))throw Error("this.constructor must be prototype of Member");var o={};return o[u.ENTITY_ID]=t,r.forEach(function(e){e!==u.ENTITY_ID&&(o[e]=n[e])}),new this(o)}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var f=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(10),y=n(p),h=r(0),b=r(1),d=(n(b),r(11)),v=n(d),m=r(12),O=n(m),_=r(8),g=n(_),j=r(15),w=n(j),P=r(3),T=r(16),E=n(T),k=r(7),M=(n(k),r(17)),D=n(M),I=r(9),x=n(I),C=r(19),N=n(C),R=function(){function e(t){c(this,e);var r=t.dimensionHierarchies,n=t.cellTable;this.dimensionHierarchies=r.map(function(e){return O.default.createDimensionTree(e)}),this.cellTable=new D.default(n)}return s(e,[{key:"addFacts",value:function(e){e.forEach(this.addFact)}},{key:"addFact",value:function(){}},{key:"getFacts",value:function(){return this.denormalize(this.getMeasure())}},{key:"getDimensionMembers",value:function(e){return this.getSpace()[e]}},{key:"getFactsBySet",value:function(e){return this.denormalize(this.getMeasureBySet(e))}},{key:"getMeasure",value:function(){return this.cellTable}},{key:"getMeasureBySet",value:function(e){return this.projection(e).cellTable}},{key:"getDimensionMembersBySet",value:function(e,t){var r=this.projection(t),n=r.cellTable;return this.getDimensionMembersFromCells(e,n)}},{key:"getSpace",value:function(){var e={};return this.dimensionHierarchies.forEach(function(t){var r=t.getSpace();l(e,r)}),e}},{key:"projection",value:function(e){var t=this;if(e){var r=this.getMeasure();if((new w.default).applyAdapter(e,this.getSpace()),0===Object.keys(e).length)return{cellTable:r};var n={};Object.keys(e).forEach(function(t){n[t]=Array.isArray(e[t])?e[t]:[e[t]]});var o=Object.keys(n).map(function(e){var r=n[e].map(function(r){var n=t.searchDimensionTreeByDimension(e),o=n.recoveryTreeProjectionOfMember(e,r),i=o.getRoot().getTreeValue();return a({},i.dimension,i.members)});return N.default.union.apply(N.default,u(r))}),i=r;return o.forEach(function(e){i=i.filter(function(r){return t.cellBelongsToSpace(r,e)})}),{cellTable:i}}}},{key:"cellBelongsToSpace",value:function(t,r){return!Object.keys(r).some(function(n){var o=r[n],i=e.genericId(n);return!o.find(function(e){return e[h.ENTITY_ID]===t[i]})})}},{key:"searchDimensionTreeByDimension",value:function(e){var t=void 0;return this.dimensionHierarchies.forEach(function(r){r.searchValueDimension(e)&&(t=r.searchValueDimension(e))}),t}},{key:"getDimensionMembersFromCells",value:function(t,r){var n=this.searchDimensionTreeByDimension(t),o=void 0,i=void 0;n.isRoot()?(o=n.getTreeValue().members,i=n.getTreeValue().dimension):(o=n.getRoot().getTreeValue().members,i=n.getRoot().getTreeValue().dimension);var u=e.genericId(i),a=[];if(r.forEach(function(e){o.forEach(function(t){e[u]===t[h.ENTITY_ID]&&-1===a.indexOf(t)&&a.push(t)})}),n.isRoot())return a;var c=a,f=!1,l=i;return n.getRoot().tracePreOrder(function(e,r){r.isRoot()||(f||(c=n.rollUpDimensionMembers(l,c),l=e.dimension),e.dimension===t&&(f=!0))}),c}},{key:"cartesian",value:function(){var e=function(e,t){var r;return(r=[]).concat.apply(r,u(e.map(function(e){return t.map(function(t){return[].concat(e,t)})})))},t=function t(r,n){for(var o=arguments.length,i=Array(o>2?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];return n?t.apply(void 0,[e(r,n)].concat(i)):r},r=[],n=this.dimensionHierarchies.map(function(e){return e.getTreeValue()}).map(function(e){return r.push(e.dimension),e.members}),o=t.apply(null,n),i=new x.default;return o.forEach(function(e){var t={};return r.forEach(function(r,n){t[r]=e[n]}),i.addTuple(t),t}),i}},{key:"denormalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getMeasure();return E.default.destroy(e,this.dimensionHierarchies)}},{key:"residuals",value:function(){var e=this,t=this.cartesian(),r=[];return t.forEach(function(t){e.getFactsBySet(t).length>1&&r.push(t)}),r}}],[{key:"create",value:function(e,t){if(!V.isPrototypeOf(this)&&V!==this)throw new P.CreateInstanceException;var r=t.map(function(e){return O.default.createDimensionTree(e)}),n=new g.default(e),o=new D.default(n);return E.default.anotherBuild(n,o,r),new this({dimensionHierarchies:r,cellTable:o})}},{key:"genericId",value:function(e){return e+"_"+h.ENTITY_ID}}]),e}(),V=function(e){function t(){return c(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"addDimensionMember",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments[4];if("string"!=typeof e)throw TypeError("parameter dimension expects as string: "+e);var u={};Object.keys(r).forEach(function(e){var t=r[e],o=n.getDimensionMembers(e),i=t[h.ENTITY_ID],a=o.find(function(e){return i===e[h.ENTITY_ID]});if(!a)throw new P.CantAddMemberRollupException(e,i);u[e]=a});var c=this.searchDimensionTreeByDimension(e);c.getChildTrees().forEach(function(e){var n=e.getTreeValue(),o=n.dimension,i=r[o];if(!i)throw new P.CantAddMemberRollupException(o);t[R.genericId(o)]=i[h.ENTITY_ID]});var f=this._createMember(c,t),s=e;c.traceUpOrder(function(e){if(c!==e){var t=e.getTreeValue(),r=t.dimension,i=a({},R.genericId(s),f[h.ENTITY_ID]);l(i,o[r]),f=n._createMember(e,i),s=r}}),this.fill(i)}},{key:"removeDimensionMember",value:function(e,t){var r=this.searchDimensionTreeByDimension(e),n=r.removeDimensionMember(e,t),o=this.getMeasure(),i=function(e,t){var r=[],n=R.genericId(e);return o.forEach(function(e){t.forEach(function(t){e[n]==t[h.ENTITY_ID]&&r.push(e)})}),r};Object.keys(n).map(function(e){i(e,n[e]).forEach(function(e){o.removeCell(e)})})}},{key:"_validateCompletenessRollupCoordinatesData",value:function(e,t,r){}},{key:"denormalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getMeasure(),r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"denormalize",this).call(this,e);return r&&n.forEach(function(t,r){e[r]instanceof y.default&&delete t[h.ENTITY_ID]}),n}},{key:"fill",value:function(e){var t=this;if(!this.residuals().length){this.cartesian().forEach(function(r){t.getMeasureBySet(r).length||t._createNormalizeData(r,e)})}}},{key:"unfilled",value:function(){var e=this,t=this.cartesian(),r=[];return t.forEach(function(t){0===e.getFactsBySet(t).length&&r.push(t)}),r}},{key:"_createNormalizeData",value:function(e,t){var r={};Object.keys(e).forEach(function(t){r[R.genericId(t)]=e[t][h.ENTITY_ID]}),r=l({},r,t);var n=new y.default(r);this.getMeasure().addCell(n)}},{key:"_createMember",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getSpace(),o=e.getTreeValue(),i=o.keyProps,u=o.dimension,a=e.getChildTrees().map(function(e){return e.getTreeValue().dimension}),c=[];a.forEach(function(e){c.push(R.genericId(e))});var f=t.reduceId(n[u]),l=v.default.create(f,i.concat(c),r);return n[u].addMember(l),l}}],[{key:"reduceId",value:function(e){return e.length?e.reduce(function(e,t){return e[h.ENTITY_ID]>t[h.ENTITY_ID]?e:t},0).id+1:1}}]),t}(R);t.default=V},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});t.NotCompletelySpaceException=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.message='Not completely defined space for added member, not found member for dimension: "'+e+'"',r}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.CantAddMemberRollupException=function(e){function t(e,r){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.message="Can't add member, rollup dimension: "+e+" with id: "+r+" not found",i}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.NotFoundFactId=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.message="Not found fact id",e}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.CreateInstanceException=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.message="this must have prototype of Cube",e}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.DimensionException=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.message='For the name "'+e+'" the dimension is already set',r}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.handleError=function(e){throw e instanceof Error&&(e.message="[Cube] "+e.message),e}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(0),l=r(1),s=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&(e=e.map(function(e){return new s.default(e)}),a(r,e)),r}return i(t,e),c(t,[{key:"filter",value:function(){return[].filter.apply(this,arguments)}},{key:"searchValue",value:function(e){return this.filter(function(t){return Object.keys(t).find(function(r){return r!==f.ENTITY_ID&&t[r]===e})})}},{key:"searchData",value:function(e){if(e&&"object"===(void 0===e?"undefined":u(e))){var t=Object.keys(e);return this.filter(function(r){return t.some(function(t){return r.hasOwnProperty(t)&&r[t]!==e[t]})})}}},{key:"addMember",value:function(e){this.indexOf(-1===e[f.ENTITY_ID])&&this.push(e)}},{key:"removeMember",value:function(e){var t=this.indexOf(e);if(-1===t)throw new Error("represented member was not found",e);this.splice(t,1)}},{key:"setMembers",value:function(e){this.splice(0,this.length),a(this,e)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=p},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),c=r(6),f=function(e){return e&&e.__esModule?e:{default:e}}(c),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"deleteProps",value:function(e){var t=this;e.forEach(function(e){e!==a.ENTITY_ID&&delete t[e]})}}]),t}(f.default);t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(0),u=r(3),a=r(7),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){var t=void 0===e?"undefined":o(e);return"object"!==t&&"function"!==t&&"undefined"!==t||null===e},l=function e(t){n(this,e);try{for(var r in t){if(!t.hasOwnProperty(r))return;f(t[r])?this[r]=t[r]:c.default.warn('[Fact] value of prop "'+r+'" has an unspecified value: '+t[r])}if(!(i.ENTITY_ID in this))throw new u.NotFoundFactId}catch(e){(0,u.handleError)(e)}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=console,o={log:function(e){n.log("[Cube] "+e)},warn:function(e){n.warn("[Cube] "+e)},warnOnce:function(){var e={};return function(t){e[t]||(e[t]=!0,n.warn("[Cube] "+t))}}()};t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(6),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&u(r,e.map(function(e){return new c.default(e)})),r}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},f=r(18),l=function(e){return e&&e.__esModule?e:{default:e}}(f),s=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&u(r,e.map(function(e){return new l.default(e)})),r}return i(t,e),a(t,[{key:"addTuple",value:function(e){this.push(new l.default(e))}},{key:"forEach",value:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"forEach",this).apply(this,arguments)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(5),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e,r){return n(this,t),e.id||(e.id=u()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return i(t,e),t}(c.default);t.default=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},c=r(1),f=function(e){return e&&e.__esModule?e:{default:e}}(c),l=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,null,[{key:"create",value:function(e,r,n){var o={};return r.forEach(function(e){o[e]=n.hasOwnProperty(e)?n[e]:null}),a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e,r,o)}}]),t}(f.default);t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(13),l=n(f),s=r(14),p=n(s),y=(r(3),r(2)),h=n(y),b=r(0),d=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.dimensionTable,u=e.dependency,c=void 0===u?[]:u,f=e.parentNode,s=void 0===f?null:f;return Object.defineProperties(r,{dimensionTable:{value:new l.default(n),enumerable:!0,editable:!1},parentNode:{value:s,enumerable:!1,editable:!1},dependency:{value:c.map(function(e){return new t(a({},e,{parentNode:r}))}),enumerable:!0,editable:!1}}),r}return u(t,e),c(t,[{key:"getTreeValue",value:function(){return this.dimensionTable}},{key:"getParentTree",value:function(){return this.parentNode}},{key:"getChildTrees",value:function(){return this.dependency}},{key:"getSpace",value:function(){var e={};return this.getRoot().tracePostOrder(function(t){var r=t.dimension,n=t.members;e[r]=n}),e}},{key:"traceUp",value:function(e,t){this.searchValueDimension(e).traceUpOrder(function(e){t(e.getTreeValue())})}},{key:"searchValueDimension",value:function(e){return this.searchValue(function(t){return t.getTreeValue().dimension===e})}},{key:"recoveryTreeProjectionOfMember",value:function(e,r){var n=this.searchValueDimension(e),o=void 0,i=void 0,u=new t(this.getRoot());return u.clearDimensionTablesMembers(),n.traceUpOrder(function(e){var t=e.getTreeValue(),a=t.members,c=t.dimension;if(e==n){var f=a.find(function(e){return e[b.ENTITY_ID]===r[b.ENTITY_ID]});if(!f)throw"member not found";o=[f],i=c}else{var l=h.default.genericId(i),s=[];a.forEach(function(e){o.forEach(function(t){e[l]===t[b.ENTITY_ID]&&s.push(e)})}),o=s,i=c}u.searchValueDimension(i).getTreeValue().setMemberList(o)}),u}},{key:"removeDimensionMember",value:function(e,t){var r=this.searchValueDimension(e),n=r.recoveryTreeProjectionOfMember(e,t),o={},i={};n.tracePostOrder(function(e){var t=e.dimension,r=e.members;o[t]=r});var u=this.getSpace();1===u[e].members&&r.tracePreOrder(function(e){var t=e.getTreeValue(),r=t.members,n=t.dimension;o[n]=r}),Object.keys(o).forEach(function(e){o[e].forEach(function(t){u[e].removeMember(t)})});var a=n.getRoot().getTreeValue(),c=a.dimension,f=a.members;return i[c]=f,i}},{key:"clearDimensionTablesMembers",value:function(){this.tracePostOrder(function(e,t){t.getTreeValue().clearMemberList()})}},{key:"drillDownDimensionMembers",value:function(e,t){var r=this.getRoot().searchValueDimension(e);if(r.isRoot())return t;var n=r.getParentTree(),o=n.getTreeValue(),i=o.members,u=h.default.genericId(e),a=[];return t.forEach(function(e){i.forEach(function(t){t[u]===e[b.ENTITY_ID]&&-1===a.indexOf(t)&&a.push(t)})}),a}},{key:"rollUpDimensionMembers",value:function(e,t){var r=this.getRoot().searchValueDimension(e);if(r.isExternal())return t;var n=r.getChildTrees()[0],o=n.getTreeValue(),i=o.members,u=o.dimension,a=h.default.genericId(u),c=[];return t.forEach(function(e){i.forEach(function(t){e[a]===t[b.ENTITY_ID]&&-1===c.indexOf(t)&&c.push(t)})}),c}}],[{key:"createDimensionTree",value:function(e){var r=new t(e);return r.tracePostOrder(function(e,t){e.dependencyNames=t.getChildTrees().map(function(e){return e.getTreeValue().dimension})}),r}}]),t}(p.default);t.default=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(4),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(t){var r=t.dimension,o=t.keyProps,i=t.otherProps,a=void 0===i?[]:i,c=t.dependencyNames,f=void 0===c?[]:c,l=t.members,s=void 0===l?[]:l;if(n(this,e),!r||!o)throw Error("Bad definition DimensionTable, params 'dimension' and 'keyProps' is required");this.dimension=r,this.keyProps=o.map(function(e){return e}),this.otherProps=a.map(function(e){return e}),this.dependencyNames=f,this.members=new u.default(s)}return o(e,[{key:"setMemberList",value:function(e){this.members.setMembers(e)}},{key:"clearMemberList",value:function(){this.members=new u.default([])}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e)}return o(e,[{key:"getTreeValue",value:function(){throw"abstract method"}},{key:"getParentTree",value:function(){throw"abstract method"}},{key:"getChildTrees",value:function(){throw"abstract method"}},{key:"isExternal",value:function(){return!this.getChildTrees().length}},{key:"isRoot",value:function(){return null===this.getParentTree()}},{key:"isFirstLevel",value:function(){return!this.isRoot()&&null===this.getParentTree().getParentTree()}},{key:"getRootTree",value:function(){var e=void 0;return this.traceUpOrder(function(t){t.isRoot()&&(e=t)}),e}},{key:"searchValue",value:function(e){var t=void 0;return this.tracePostOrder(function(r,n){e(n)&&(t=n)}),t}},{key:"traceUpOrder",value:function(e){!function t(r){var n=r.getParentTree();e(r),null!==n&&t(n)}(this)}},{key:"tracePostOrder",value:function(e){!function t(r){var n=r.getChildTrees(),o=r.getTreeValue();n.length&&n.forEach(function(e){t(e)}),e(o,r)}(this)}},{key:"tracePreOrder",value:function(e){!function t(r){var n=r.getChildTrees(),o=r.getTreeValue();e(o,r),n.length&&n.forEach(function(e){t(e)})}(this)}},{key:"getExternals",value:function(){var e=[];return this.tracePostOrder(function(t,r){r.isExternal(r)&&e.push(r)}),e}},{key:"getRoot",value:function(){var e=void 0;return this.traceUpOrder(function(t){t.isRoot()&&(e=t)}),e}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e)}return o(e,[{key:"applyAdapter",value:function(e,t){return this.removeEmptyFilds(e),Object.keys(e).forEach(function(r){var n=e[r],o=function(e,r){var n=t[e];return n?n.searchValue(r):void 0};"string"==typeof n&&(e[r]=o(r,n)||[]),Array.isArray(n)&&n.length&&"string"==typeof n[0]&&(e[r]=[],n.reduce(function(e,t){var n=o(r,t);return n&&[].splice.apply(e,[e.length,0].concat(n)),e},e[r]))}),e}},{key:"removeEmptyFilds",value:function(e){return Object.keys(e).reduce(function(e,t){return e[t]||delete e[t],e},e),e}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(4),c=n(a),f=r(1),l=n(f),s=r(0),p=r(2),y=n(p),h=r(8),b=n(h),d=function(){function e(){o(this,e)}return u(e,null,[{key:"anotherBuild",value:function(t,r,n){n.forEach(function(n){n.tracePostOrder(function(n,o){e.processDimension(o,r,t)})})}},{key:"processDimension",value:function(t,r){var n=t.isFirstLevel(),o=t.getTreeValue(),i=o.dimension,u=o.keyProps,a=void 0===u?[]:u,c=o.otherProps,f=void 0===c?[]:c,l=o.dependencyNames,s=void 0,p=[r,i,a,f,r,n];if(l.length){var y=[],h=function(e){return t.searchValueDimension(e).getTreeValue().members}(l[0]);y=e.mapFilter(l,r,h),s=e.makeMemberListDependency.apply(null,p.concat([l,y]))}else s=e.makeMemberList.apply(null,p);var b=[].concat(a,f);return r.forEach(function(e){e.deleteProps(b)}),o.setMemberList(s),s}},{key:"mapFilter",value:function(e,t,r){var n=y.default.genericId(e),o=[];return r.forEach(function(e){var r=t.filter(function(t){return t[n]==e[s.ENTITY_ID]});o.push(r)}),o}},{key:"makeMemberListDependency",value:function(t,r,n,o,i,u,a,f){var l=new c.default,p=0;return f.forEach(function(t){if(t.length){var c=e.makeMemberList(t,r,n,o,i,u,p);p+=c.length;var f=t[0];a.forEach(function(e){var r=y.default.genericId(e);c.forEach(function(e){e[r]=f[r],e[s.ENTITY_ID]=l.length+1,l.addMember(e)}),t.forEach(function(e){delete e[r]})})}}),l}},{key:"makeMemberList",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=(arguments[4],arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:0),u={},a=new c.default,f=[].concat(n,o);return t.forEach(function(t){var o=e.createKeyFromProps(n,t);if(!(o in u)){var c=u[o]=++i,s=l.default.create(c,f,t);a.push(s)}var p=u[o];t[y.default.genericId(r)]=p}),a}},{key:"createKeyFromProps",value:function(e,t){return e.map(function(e){return t[e]}).join(",")}},{key:"destroy",value:function(e,t){var r=new b.default;e.forEach(function(e){r.push(i({},e))});var n=function(e,t){var r=e.getTreeValue(),n=r.dimension,o=r.members,u=y.default.genericId(n),a=t[u],c=o.find(function(e){return e[s.ENTITY_ID]===a}),f=i({},c);delete f[s.ENTITY_ID],delete t[u],i(t,f)};return r.forEach(function(e){t.forEach(function(t){n(t,e),t.tracePreOrder(function(t,r){n(r,e)})})}),r}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(5),f=function(e){return e&&e.__esModule?e:{default:e}}(c),l=r(0),s=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&u(r,e.map(function(e){return new f.default(e)})),r}return i(t,e),a(t,[{key:"findById",value:function(e){return this.find(function(t){return t[l.ENTITY_ID]===e})}},{key:"addCell",value:function(e){this.push(e)}},{key:"removeCell",value:function(e){var t=this.indexOf(e);this.splice(t,1)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function e(t){n(this,e),o(this,t)};t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(4),a=n(u),c=r(9),f=(n(c),function(){function e(t){var r=this;o(this,e),t&&this.getDimensionList.call(t).forEach(function(e){var n=t[e];r.setMemberList(e,n)})}return i(e,[{key:"getMemberList",value:function(e){var t=this[e];if(!t)throw Error('dimension "'+e+'" not found');return t}},{key:"setMemberList",value:function(e,t){this[e]=new a.default(t)}},{key:"getDimensionList",value:function(){return Object.getOwnPropertyNames(this)}}],[{key:"union",value:function(){var t={};return[].concat(Array.prototype.slice.call(arguments)).forEach(function(r){e.add(t,r)}),t}},{key:"add",value:function(e,t){Object.keys(t).forEach(function(r){e[r]||(e[r]=[]),Array.prototype.push.apply(e[r],t[r])})}}]),e}());t.default=f}]).default});