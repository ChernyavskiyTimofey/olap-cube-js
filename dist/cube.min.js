/*!
 * Copyright Â© 2018 Orlov Leonid. All rights reserved. Contacts: <feonitu@yandex.ru>
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Cube=t():e.Cube=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ENTITY_ID="id"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),c=n(4),f=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"deleteProps",value:function(e){var t=this;e.forEach(function(e){e!==a.ENTITY_ID&&delete t[e]})}}]),t}(f.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function e(t,n,i){var u=this;r(this,e),this[o.ENTITY_ID]=t,n.forEach(function(e){e!==o.ENTITY_ID&&(u[e]=i[e])})};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){var n=this;r(this,e),t&&this.getDimensionList.call(t).forEach(function(e){n.setMemberList(e,t[e])})}return o(e,[{key:"getMemberList",value:function(e){return this[e]}},{key:"setMemberList",value:function(e,t){this[e]=t}},{key:"getDimensionList",value:function(){return Object.keys(this)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),u=function(){function e(t){if(r(this,e),Object.assign(this,t),!this[i.ENTITY_ID])throw"data must have id parameter"}return o(e,[{key:"createKeyFromProps",value:function(e){var t=this;return e.map(function(e){return t[e]}).join(",")}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){var n=t.dimension,o=t.keyProps,i=t.otherProps,u=void 0===i?[]:i;if(r(this,e),!n||!o||!o.length)throw Error("Bad dimension description at schema, params 'dimension' and 'keyProps' is required");this.dimension=n,this.keyProps=o,this.otherProps=u};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&Object.assign(n,e.map(function(e){return new a.default(e)})),n}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),a=r(u),c=n(2),f=r(c),s=n(0),l=n(3),p=r(l),h=n(16),y=r(h),d=n(6),b=r(d),v=n(17),O=r(v),_=function(){function e(t,n){o(this,e);var r=new b.default(t),i=n.map(function(e){return new O.default(e)}),u=this.normalize(r,i),a=u.space,c=u.cellTable;this.space=a,this.cellTable=c,Object.defineProperty(this,"dimensionTableList",{value:i})}return i(e,[{key:"normalize",value:function(e,t){var n=this,r=new p.default,o=new y.default(e);return t.forEach(function(i,u){var a=i.dimension,c=i.keyProps,f=i.otherProps,s=i.dependencyNames,l=u===t.length-1,p=void 0,h=[e,a,c,f,o];if(s.length){var y=[];l?(y=n._mapFilterRoot(s,o,r),p=n._makeMemberListDependency.apply(n,h.concat([r,s,y]))):(y=n._mapFilter(s,o,r.getMemberList(s[0])),p=n._makeMemberListDependency.apply(n,h.concat([r,s,y])))}else p=n._makeMemberList.apply(n,h);r.setMemberList(a,p)}),{space:r,cellTable:o}}},{key:"denormalize",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cellTable,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.dimensionTableList,o=new b.default;return n.forEach(function(e){o.push(Object.assign({},e))}),o.forEach(function(n){var o=function(r){var o=e.genericId(r.dimension),i=n[o],u=t.space.getMemberList(r.dimension).find(function(e){return e[s.ENTITY_ID]===i}),a=Object.assign({},u);delete a[s.ENTITY_ID],delete n[o],Object.assign(n,a)};r.forEach(function(e){o(e)})}),o}},{key:"_mapFilter",value:function(t,n,r){var o=e.genericId(t);return r.map(function(e){return n.filter(function(t){return t[o]==e[s.ENTITY_ID]})})}},{key:"_mapFilterRoot",value:function(e,t,n){var r=this,o=[t];return e.forEach(function(e){var t=[];o.forEach(function(o){r._mapFilter(e,o,n.getMemberList(e)).forEach(function(e){t.push(e)})}),o=t}),o}},{key:"_makeMemberList",value:function(t,n,r,o,i){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c={},l=new a.default,p=[].concat(r,o);return t.forEach(function(t){var o=t.createKeyFromProps(r);if(!(o in c)){var a=c[o]=++u,h=new f.default(a,p,t);l.push(h)}var y=t[s.ENTITY_ID],d=i.findById(y);d.deleteProps(p);var b=c[o];d[e.genericId(n)]=b}),l}},{key:"_makeMemberListDependency",value:function(e,t,n,r,o,i,u,c){var f=this,l=new a.default,p=0;return c.forEach(function(e){if(e.length){var i=f._makeMemberList(e,t,n,r,o,p);p+=i.length,i.forEach(function(e){e[s.ENTITY_ID]=l.length+1,l.add(e)})}}),l}}],[{key:"genericId",value:function(e){return e+"_"+s.ENTITY_ID}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(9),y=r(h),d=n(0),b=n(2),v=(r(b),n(10)),O=r(v),_=n(11),m=n(3),g=r(m),j=n(6),w=(r(j),n(14)),P=r(w),E=n(18),T=r(E),k=n(19),M=r(k),x=n(7),I=r(x),N=n(21),D=function(){function e(t,n){c(this,e);var r=new _.Schema(n);Object.defineProperty(this,"schema",{value:r}),Object.defineProperty(this,"facts",{value:t});var o=r.getDimensionsResolutionOrder(),i=new I.default(t,o),u=i.space,a=i.cellTable;Object.defineProperty(this,"star",{value:i}),this.space=u,this.cellTable=a,this.residuals().length>0&&console.warn("Fact table has residuals"),0==this.schema.getFinal().length&&console.warn("Fact table not has final dimension")}return p(e,[{key:"query",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[].slice.call(arguments);r.length>0&&r[0]&&"object"===l(r[0])&&(t=r[0],e=null);var o=this.cellTable;if(t){(new T.default).applyAdapter(t,this.space);o=new P.default(t).match(o)}if(e){var i=I.default.genericId(e),u=o.map(function(e){return e[i]}),a=function(e){var t={};return e.forEach(function(e){t[e]=e}),Object.keys(t).map(function(e){return t[e]})}(u),c=[];return this.space.getMemberList(e).forEach(function(e){-1!==a.indexOf(e[d.ENTITY_ID])&&c.push(e)}),c}return n?o:this.denormalize(o)}},{key:"denormalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cellTable;return this.star.denormalize(e)}},{key:"cartesian",value:function(){var e=this,t=this.schema.getBranches(),n=function(e,t){var n;return(n=[]).concat.apply(n,a(e.map(function(e){return t.map(function(t){return[].concat(e,t)})})))},r=function e(t,r){for(var o=arguments.length,i=Array(o>2?o-2:0),u=2;u<o;u++)i[u-2]=arguments[u];return r?e.apply(void 0,[n(t,r)].concat(i)):t},o=t.map(function(t){var n=t.map(function(e){return e.dimension}).reverse();if(n.length>1){var r=[];return function t(n,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=n[o];o+=1,e.query(u,i).map(function(e){var a=Object.assign({},i);a[u]=e,o===n.length?r.push(a):t(n,o,a)})}(n,0),r}return[].concat(e.query(n[0])).map(function(e){return u({},n[0],e)})}),i=r.apply(null,o),c=i.map(function(e){return e.reduce(function(e,t){return Object.assign(e,t)},{})}),f=new M.default;return c.forEach(function(e){f.add(e)}),f}},{key:"residuals",value:function(){var e=this,t=this.cartesian(),n=[];return t.forEach(function(t){e.query(t).length>1&&n.push(t)}),n}},{key:"unfilled",value:function(){var e=this,t=this.cartesian(),n=[];return t.forEach(function(t){0===e.query(t).length&&n.push(t)}),n}}]),e}(),R=function(e){function t(e,n){return c(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return i(t,e),p(t,[{key:"addMember",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)throw Error("parameter dimension expects as string: "+e);this._validateDimension(e);var o=u({},e,this._createMember(e,n)),i={};Object.keys(r).forEach(function(e){var n=r[e],o=t.query(e),u=n[d.ENTITY_ID],a=o.find(function(e){return u===e[d.ENTITY_ID]});if(!a)throw new N.CantAddMemberRollupException(e,u);i[e]=a}),this._validateCompletenessRollupCoordinatesData(e,n,r);var a={};this.schema.traceUp(e,function(e){var n=e.dimension;a[n]=t._createMember(n)});var c=Object.assign({},o,i,a),f=this.schema.getExternals(),s=f.filter(function(t){var n=t.dimension;return e!==n&&!i[n]}),l=new g.default;s.forEach(function(e){var n=e.dimension;l.setMemberList(n,t.space.getMemberList(n))});var p=function(e){var n=t.schema.getMeasure().dimension,r=t._createMember(n),o=u({},n,r),i=Object.assign({},e,o);t._createNormalizeData(i)},h=this.schema.getNames().length-1,y=l.getDimensionList(),b=y.map(function(e){return l.getMemberList(e)});!function e(n,r,o,i){var a=n.length,c=n[o],f=[],s=t.schema.getByDependency(c);r[o].forEach(function(l){var p=Object.assign({},i);if(p[c]=l,s){var y=t.query(s.dimension,u({},c,l));e([s.dimension],[y],0,p)}o+1===a?Object.keys(p).length===h&&f.push(p):e(n,r,o+1,p)}),f.forEach(function(e){p(e)})}(y,b,0,c)}},{key:"_validateDimension",value:function(e){if(e===this.schema.getMeasure().dimension)throw new N.AddDimensionOfCellException(e)}},{key:"_validateCompletenessRollupCoordinatesData",value:function(e,t,n){var r=f(u({},e,t),n),o=this.schema.getPostOrderChildDimensionList(e);if(o.length){var i=o[0];if(r[i])return;throw new N.NotCompletelySpaceException(i)}}},{key:"removeMember",value:function(e,t){var n=this,r=this.schema.getDependenciesNames(e),o=this.space.getMemberList(e).indexOf(t);if(-1===o)throw new Error("represented member was not found in the "+e+" dimension");this.space.getMemberList(e).splice(o,1),this.cellTable.filter(function(n){return n[I.default.genericId(e)]==t[d.ENTITY_ID]}).forEach(function(e){var t=n.cellTable.indexOf(e);n.cellTable.splice(t,1),r.forEach(function(t){n._removeSubModel(e,t)})}),this._normalize()}},{key:"denormalize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cellTable,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"denormalize",this).call(this,e);return n&&r.forEach(function(t,n){e[n]instanceof y.default&&delete t[d.ENTITY_ID]}),r}},{key:"_removeSubModel",value:function(e,t){var n=this;this.space.getMemberList(t).filter(function(n){return n[d.ENTITY_ID]==e[I.default.genericId(t)]}).forEach(function(e){var r=n.space.getMemberList(t).indexOf(e);n.space.getMemberList(t).splice(r,1)})}},{key:"_normalize",value:function(){var e=this,t=[];this.schema.getNames().forEach(function(n){if(e.space.getMemberList(n).length){var r=[].concat(e.space.getMemberList(n));r.forEach(function(o,i){var u=I.default.genericId(n);e.cellTable.find(function(e){return e[u]==o[d.ENTITY_ID]})||(e.space.getMemberList(n).splice(i-(r.length-e.space.getMemberList(n).length),1),t.push(o))})}})}},{key:"fill",value:function(e){var t=this;if(!this.residuals().length){var n=this.schema.getMeasure().dimension,r=this.cartesian(),o=[];r.forEach(function(e){t.query(n,e).length||o.push(e)}),o.forEach(function(r){var o=t._createMemberDependency(n,e),i=Object.assign({},r,o);t._createNormalizeData(i)})}}},{key:"_createNormalizeData",value:function(e){var t={};Object.keys(e).forEach(function(n){t[I.default.genericId(n)]=e[n][d.ENTITY_ID]});var n=new y.default(t);this.cellTable.push(n)}},{key:"_createMember",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.schema.getDimensionTable(e),o=r.keyProps,i=t.reduceId(this.space.getMemberList(e)),u=new O.default(i,o,n);return this.space.getMemberList(e).add(u),u}},{key:"_createMemberDependency",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return r[e]=this._createMember(e,n),this.schema.traceUp(e,function(e){var n=e.dimension;r[n]=t._createMember(n)}),r}}],[{key:"reduceId",value:function(e){return e.length?e.reduce(function(e,t){return e[d.ENTITY_ID]>t[d.ENTITY_ID]?e:t},0).id+1:1}}]),t}(D);t.default=R},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e,n){return r(this,t),e.id||(e.id=u()),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return i(t,e),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(e,n,i){r(this,t);var u={};return n.forEach(function(e){u[e]=i.hasOwnProperty(e)?i[e]:null}),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,u))}return i(t,e),t}(a.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=t.DimensionException=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(12),l=r(s),p=n(13),h=r(p),y=t.DimensionException=function(e){function t(e){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='For the name "'+e+'" the dimension is already set',n}return a(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),d=function e(t){var n=t.dependency,r=void 0===n?[]:n,i=o(t,["dependency"]);return{value:f({},i,{dependencyNames:r.map(function(e){return e.dimension})}),childNodes:r.map(e)}};t.Schema=function(e){function t(e){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d(e)));return n.schema=new l.default(e),n._dimensionsResolutionOrder=[],n._dimensionTable={},n.postOrder(function(e){var t=e.dimension;if(n._dimensionTable[t])throw new y(t);var r=e.dimension;n._dimensionTable[r]=e,n._dimensionsResolutionOrder.push(n._dimensionTable[r])}),n}return a(t,e),c(t,[{key:"getDimensionTable",value:function(e){return this._dimensionTable[e]}},{key:"getDimensionsResolutionOrder",value:function(){return this._dimensionsResolutionOrder}},{key:"getByDependency",value:function(e){var t=this,n=!1;return this.postOrder(function(r,o){var i=r.dimension;if(e===i){var u=t.getParentOf(o);u&&u!==t._root&&(n=u.value)}}),n}},{key:"getNames",value:function(){return this._dimensionsResolutionOrder.map(function(e){return e.dimension})}},{key:"traceUp",value:function(e,t){var n=this,r=!1,o=[];this.postOrder(function(t,n){var o=t.dimension;e===o&&(r=n)});r&&function e(t){var r=n.getParentOf(t);if(r){if(r===n.getRoot())return;o.push(r),e(r)}}(r),o.forEach(function(e){t(e.value)})}},{key:"getDependenciesNames",value:function(e){var t=[];return this.postOrder(function(n,r){var o=n.dimension;if(e===o){new h.default(r).postOrder(function(n){var r=n.dimension;e!==r&&t.push(r)})}}),t}},{key:"getMeasure",value:function(){return this.getRoot().value}},{key:"getExternals",value:function(){var e=this,t=[];return this.postOrder(function(n,r){e.isExternal(r)&&t.push(n)}),t}},{key:"getInternals",value:function(){}},{key:"getPostOrderChildDimensionList",value:function(e){var t=void 0,n=[];this.postOrder(function(n,r){n.dimension===e&&(t=r)});return t&&function e(t){t&&t.childNodes.length&&t.childNodes.forEach(function(t){n.push(t.value.dimension),e(t)})}(t),n}},{key:"getFinal",value:function(){return this.getRoot().childNodes.map(function(e){return e.value})}},{key:"isRoot",value:function(e){return e===this.getRoot().value}}]),t}(h.default)},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e){var n=e.dependency,u=void 0===n?null:n,a=r(e,["dependency"]);o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return c.dependency=u&&u.map(function(e){return new t(e)}),c}return u(t,e),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t){var n=t.value,o=t.childNodes,i=void 0===o?[]:o;r(this,e),this.value=n,this.childNodes=i.length?i.map(function(t){return new e(t)}):i},u=function(){function e(t){r(this,e),this._root=new i(t)}return o(e,[{key:"getRoot",value:function(){return this._root}},{key:"createIterator",value:function(e){var t=0;return{next:function(){var n=t>=e.length;return{done:n,value:n?void 0:e[t++]}}}}},{key:"preOrder",value:function(e){!function t(n){e(n.value,n),n.childNodes.length&&n.childNodes.forEach(function(e){t(e)})}(this.getRoot())}},{key:"preOrderQueue",value:function(){var e=[];return function t(n){e.push(n),n.childNodes.length&&n.childNodes.forEach(function(e){t(e)})}(this.getRoot()),e}},{key:"postOrder",value:function(e){!function t(n){n.childNodes.length&&n.childNodes.forEach(function(e){t(e)}),e(n.value,n)}(this.getRoot())}},{key:"inOrder",value:function(e){}},{key:"levelOrder",value:function(e){}},{key:"isInternal",value:function(e){return!!e.childNodes.length}},{key:"isExternal",value:function(e){return!e.childNodes.length}},{key:"isRoot",value:function(e){return this._root===e}},{key:"getParentOf",value:function(e){var t=!1;return this.preOrder(function(n,r){r.childNodes&&r.childNodes.length&&-1!==r.childNodes.indexOf(e)&&(t=r)}),t}},{key:"search",value:function(e){}},{key:"getBranches",value:function(){return this.getRoot().childNodes.map(function(e){return e}).map(function(e){var t=[];return function e(n){t.push(n.value),n.childNodes.length&&n.childNodes.forEach(function(t){e(t)})}(e),t})}},{key:"getLeafs",value:function(){var e=this.preOrderQueue(),t=[];return e.forEach(function(e){e.childNodes.length&&t.push(e)}),t}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},f=n(3),s=r(f),l=n(0),p=n(1),h=(r(p),n(7)),y=r(h),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='data attribute for dimension is "'+e+'"',n}return u(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),b=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),a(t,[{key:"setMemberList",value:function(e,n){if(!n)throw new d;return Array.isArray(n)||(n=[n]),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMemberList",this).call(this,e,n)}},{key:"match",value:function(e){var t=this,n=[].concat(e);return this.getDimensionList().forEach(function(e){var r=y.default.genericId(e),o=t.getMemberList(e),i=[];o.forEach(function(e){var t=e[l.ENTITY_ID],o=n.filter(function(e){return e[r]==t}),u=[i.length,0].concat(o);[].splice.apply(i,u)}),n=i}),n}}]),t}(s.default);t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&Object.assign(n,e),n}return i(t,e),u(t,[{key:"filter",value:function(){return[].filter.apply(this,arguments)}},{key:"search",value:function(e){return this.filter(function(t){return Object.keys(t).find(function(n){return n!==a.ENTITY_ID&&t[n]===e})})}},{key:"add",value:function(e){this.indexOf(-1===e[a.ENTITY_ID])&&this.push(e)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=n(0),s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&Object.assign(n,e.map(function(e){return new c.default(e)})),n}return i(t,e),u(t,[{key:"findById",value:function(e){return this.find(function(t){return t[f.ENTITY_ID]===e})}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=s},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),c=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(e){function t(e){var n=e.dependencyNames,u=void 0===n?[]:n,a=r(e,["dependencyNames"]);o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return c.dependencyNames=u,c}return u(t,e),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"applyAdapter",value:function(e,t){return this.removeEmptyFilds(e),Object.keys(e).forEach(function(n){var r=e[n],o=function(e,n){var r=t.getMemberList(e);return r?r.search(n):void 0};"string"==typeof r?e[n]=o(n,r)||[]:Array.isArray(r)&&r.length&&"string"==typeof r[0]&&(e[n]=[],r.reduce(function(e,t){var r=o(n,t);return r&&[].splice.apply(e,[e.length,0].concat(r)),e},e[n]))}),e}},{key:"removeEmptyFilds",value:function(e){return Object.keys(e).reduce(function(e,t){return e[t]||delete e[t],e},e),e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},c=n(20),f=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&Object.assign(n,e.map(function(e){return new f.default(e)})),n}return i(t,e),u(t,[{key:"add",value:function(e){this.push(new f.default(e))}},{key:"forEach",value:function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"forEach",this).apply(this,arguments)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t){r(this,e),Object.assign(this,t)};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});t.NotCompletelySpaceException=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='Not completely defined space for added member, not found member for dimension: "'+e+'"',n}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.AddDimensionOfCellException=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message='You can not add a second member to the dimension for the cell: "'+e+'"',n}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)),t.CantAddMemberRollupException=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.message="Can't add member, rollup dimension: "+e+" with id: "+n+" not found",i}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error))}])});